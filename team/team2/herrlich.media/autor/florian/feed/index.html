<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Florian Bottmann &#8211; herrlich media &#8211; Werbeagentur für neue Medien aus Zeven</title>
	<atom:link href="https://herrlich.media/autor/florian/feed/" rel="self" type="application/rss+xml" />
	<link>https://herrlich.media</link>
	<description>Herrliche Werbeagentur für Webdesign, Webentwicklung, Online Marketing,  SEM, SM und Corporate Design. Bock auf gute Arbeit? Meld dich einfach. Wir sind net.</description>
	<lastBuildDate>Wed, 27 Jun 2018 09:11:45 +0000</lastBuildDate>
	<language>de-DE</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.9.8</generator>
	<item>
		<title>Ladezeiten mit Hilfe vom Redis-Cache minimieren.</title>
		<link>https://herrlich.media/blog/ladezeiten-mit-hilfe-vom-redis-cache-minimieren/</link>
		<comments>https://herrlich.media/blog/ladezeiten-mit-hilfe-vom-redis-cache-minimieren/#comments</comments>
		<pubDate>Thu, 02 May 2013 18:12:11 +0000</pubDate>
		<dc:creator><![CDATA[Florian Bottmann]]></dc:creator>
				<category><![CDATA[Blog]]></category>
		<category><![CDATA[Redis]]></category>
		<category><![CDATA[Wordpress]]></category>

		<guid isPermaLink="false">http://herrlich.media/?p=1055</guid>
		<description><![CDATA[<p>So installierst und konfigurierst du Redis richtig.</p>
<p>The post <a rel="nofollow" href="https://herrlich.media/blog/ladezeiten-mit-hilfe-vom-redis-cache-minimieren/">Ladezeiten mit Hilfe vom Redis-Cache minimieren.</a> appeared first on <a rel="nofollow" href="https://herrlich.media">herrlich media - Werbeagentur für neue Medien aus Zeven</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>So installiert und konfiguriert ihr Redis richtig.</p>
<p>Als erstes müsst ihr &#8222;Redis-Server&#8220; auf eurem Server installieren. Das macht ihr mit</p>
<blockquote><p>apt-get install redis-server</p></blockquote>
<p>Des Weiteren benötigt man die <a title="Link zur Predis-Library" href="http://github.com/nrk/predis/" target="_blank">Predis-Library</a>, damit WordPress mit dem &#8222;Redis-Server&#8220; kommunizieren kann. Diese kopiert ihr, ebenfalls wie die von <a title="Link zu Jim Westergren's Blog " href="http://www.jimwestergren.com/wordpress-with-redis-as-a-frontend-cache/" target="_blank">Jim Westergren</a> für WordPress vorbereitete <a title="Link zu predis.php" href="http://uploads.staticjw.com/ji/jim/predis.php" target="_blank">predis.php</a> ins Root eurer WP-Installation.</p>
<p>Anschließend macht ihr eine Sicherung der vorhandenen index.php, um diese mit dem Inhalt des <a title="Link zu github.com" href="http://gist.github.com/JimWestergren/3053250" target="_blank">GIST</a> zu überschreiben. Nun sollte eurer WP-Blog mit Hilfe des Redis-Caches Ladezeiten im Millisekunden-Bereich haben.</p>
<pre class="brush: php; title: ; notranslate"> &lt;?php

/*
    Author: Jim Westergren &amp; Jeedo Aquino
    File: index-with-redis.php
    Updated: 2012-10-25

    This is a redis caching system for wordpress.
    see more here: www.jimwestergren.com/wordpress-with-redis-as-a-frontend-cache/

    Originally written by Jim Westergren but improved by Jeedo Aquino.

    some caching mechanics are different from jim's script which is summarized below:

    - cached pages do not expire not unless explicitly deleted or reset
    - appending a ?c=y to a url deletes the entire cache of the domain, only works when you are logged in
    - appending a ?r=y to a url deletes the cache of that url
    - submitting a comment deletes the cache of that page
    - refreshing (f5) a page deletes the cache of that page
    - includes a debug mode, stats are displayed at the bottom most part after &lt;/html&gt;

    for setup and configuration see more here:

    www.jeedo.net/lightning-fast-wordpress-with-nginx-redis/

    use this script at your own risk. i currently use this albeit a slightly modified version
    to display a redis badge whenever a cache is displayed.

*/

// change vars here
$cf = 1;			// set to 1 if you are using cloudflare
$debug = 0;			// set to 1 if you wish to see execution time and cache actions
$display_powered_by_redis = 1;  // set to 1 if you want to display a powered by redis message with execution time, see below

$start = microtime();   // start timing page exec

// if cloudflare is enabled
if ($cf) {
    if (isset($_SERVER['HTTP_CF_CONNECTING_IP'])) {
        $_SERVER['REMOTE_ADDR'] = $_SERVER['HTTP_CF_CONNECTING_IP'];
    }
}

// from wp
define('WP_USE_THEMES', true);

// init predis
include(&quot;predis.php&quot;);
$redis = new Predis\Client('');

// init vars
$domain = $_SERVER['HTTP_HOST'];
$url = &quot;http://&quot;.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
$url = str_replace('?r=y', '', $url);
$url = str_replace('?c=y', '', $url);
$dkey = md5($domain);
$ukey = md5($url);

// check if page isn't a comment submission
(isset($_SERVER['HTTP_CACHE_CONTROL']) &amp;&amp; $_SERVER['HTTP_CACHE_CONTROL'] == 'max-age=0') ? $submit = 1 : $submit = 0);

// check if logged in to wp
$cookie = var_export($_COOKIE, true);
$loggedin = preg_match(&quot;/wordpress_logged_in/&quot;, $cookie);

// check if a cache of the page exists
if ($redis-&gt;hexists($dkey, $ukey) &amp;&amp; !$loggedin &amp;&amp; !$submit &amp;&amp; !strpos($url, '/feed/')) {

    echo $redis-&gt;hget($dkey, $ukey);
    $cached = 1;
    $msg = 'this is a cache';

// if a comment was submitted or clear page cache request was made delete cache of page
} else if ($submit || substr($_SERVER['REQUEST_URI'], -4) == '?r=y') {

    require('./wp-blog-header.php');
    $redis-&gt;hdel($dkey, $ukey);
    $msg = 'cache of page deleted';

// delete entire cache, works only if logged in
} else if ($loggedin &amp;&amp; substr($_SERVER['REQUEST_URI'], -4) == '?c=y') {

    require('./wp-blog-header.php');
    if ($redis-&gt;exists($dkey)) {
        $redis-&gt;del($dkey);
        $msg = 'domain cache flushed';
    } else {
        $msg = 'no cache to flush';
    }

// if logged in don't cache anything
} else if ($loggedin) {

    require('./wp-blog-header.php');
    $msg = 'not cached';

// cache the page
} else {

    // turn on output buffering
    ob_start();

    require('./wp-blog-header.php');

    // get contents of output buffer
    $html = ob_get_contents();

    // clean output buffer
    ob_end_clean();
    echo $html;

    // Store to cache only if the page exist and is not a search result.
    if (!is_404() &amp;&amp; !is_search()) {
        // store html contents to redis cache
        $redis-&gt;hset($dkey, $ukey, $html);
        $msg = 'cache is set';
    }
}

$end = microtime(); // get end execution time

// show messages if debug is enabled
if ($debug) {
    echo $msg.': ';
    echo t_exec($start, $end);
}

if ($cached &amp;&amp; $display_powered_by_redis) {
	// You should move this CSS to your CSS file and change the: float:right;margin:20px 0;
	echo &quot;&lt;style&gt;#redis_powered{float:right;margin:20px 0;background:url(http://images.staticjw.com/jim/3959/redis.png) 10px no-repeat #fff;border:1px solid #D7D8DF;padding:10px;width:190px;}
	#redis_powered div{width:190px;text-align:right;font:10px/11px arial,sans-serif;color:#000;}&lt;/style&gt;&quot;;
	echo &quot;&lt;a href=\&quot;http://www.jimwestergren.com/wordpress-with-redis-as-a-frontend-cache/\&quot; style=\&quot;text-decoration:none;\&quot;&gt;&lt;div id=\&quot;redis_powered\&quot;&gt;&lt;div&gt;Page generated in&lt;br/&gt; &quot;.t_exec($start, $end).&quot; sec&lt;/div&gt;&lt;/div&gt;&lt;/a&gt;&quot;;
}

// time diff
function t_exec($start, $end) {
    $t = (getmicrotime($end) - getmicrotime($start));
    return round($t,5);
}

// get time
function getmicrotime($t) {
    list($usec, $sec) = explode(&quot; &quot;,$t);
    return ((float)$usec + (float)$sec);
}

?&gt; </pre>
<p>Hier noch ein paar Hinweise zum Umgang mit dem Redis-Cache:</p>
<ul>
<li>Das Hinzufügen von &#8222;?c=y&#8220; zu der URL, löscht den gesamten Cache der Domain. Dies funktioniert <strong>nur</strong> als eingeloggter User</li>
<li>Durch das Anhängen von &#8222;?r=y&#8220; an die URL, kann der Cache der URL gelöscht werden</li>
<li>Durch das Erstellen eines Kommentars, wird der Cache der Seite gelöscht</li>
<li>Aktualisieren der Seite mit (F5), löscht den Cache der Seite</li>
<li>Es gibt einen integrierten Debug Modus, der unterhalb von &lt;/html&gt; angezeigt werden kann</li>
<li>Optional kann das Redis-Logo mit der Ladezeit angezeigt werden</li>
</ul>
<p>Allgemeine Hinweise:</p>
<ul>
<li>Nach Update von WordPress könnte eure index.php wieder überschrieben werden.</li>
<li>Andere Caching Plugins könnten den Redis-Cache behindern.</li>
</ul>
<pre></pre>
<p>The post <a rel="nofollow" href="https://herrlich.media/blog/ladezeiten-mit-hilfe-vom-redis-cache-minimieren/">Ladezeiten mit Hilfe vom Redis-Cache minimieren.</a> appeared first on <a rel="nofollow" href="https://herrlich.media">herrlich media - Werbeagentur für neue Medien aus Zeven</a>.</p>
]]></content:encoded>
			<wfw:commentRss>https://herrlich.media/blog/ladezeiten-mit-hilfe-vom-redis-cache-minimieren/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
	</channel>
</rss>
